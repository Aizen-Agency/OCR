# VPS 8GB RAM Optimized Configuration
# Copy this to .env for VPS deployment

# Flask Configuration
FLASK_ENV=production
SECRET_KEY=your-production-secret-key-change-this
DEBUG=false

# Server Configuration
HOST=0.0.0.0
PORT=5000

# OCR Configuration - Optimized for 8GB VPS
OCR_LANG=en
USE_GPU=false
USE_PP_OCR_V5_SERVER=true

# Redis Configuration
# Option 1: Direct connection parameters (preferred - avoids URL parsing issues)
# SECURITY: Set a strong password for production (minimum 32 characters)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_USERNAME=default
REDIS_PASSWORD=change-this-redis-password-in-production
REDIS_DB=0

# Option 2: URL-based connection (fallback for backward compatibility)
# If REDIS_URL is set, it will be used instead of individual parameters
# Format: redis://:password@host:port/db or redis://username:password@host:port/db
# REDIS_URL=redis://:change-this-redis-password-in-production@redis:6379/0

REDIS_CACHE_TTL=3600

# Celery Configuration
# Celery will automatically use the centralized Redis connection manager
# These can be overridden if needed, but typically not required
# CELERY_BROKER_URL=redis://redis:6379/0
# CELERY_RESULT_BACKEND=redis://redis:6379/0

# Rate Limiting Configuration
RATE_LIMIT_PER_MINUTE=10

# File Upload Configuration - Optimized for VPS
MAX_CONTENT_LENGTH=26214400  # 25MB (reduced for VPS)
UPLOAD_FOLDER=/tmp/ocr_uploads

# Image Processing Limits - Conservative for VPS
MAX_IMAGE_WIDTH=3072  # Reduced from 4096
MAX_IMAGE_HEIGHT=3072  # Reduced from 4096

# PDF Processing Limits - Conservative for VPS
MAX_PDF_SIZE=26214400   # 25MB (reduced from 50MB)
MAX_PDF_PAGES=50        # Reduced from 100
DEFAULT_DPI=200         # Reduced from 300 (faster processing)
MAX_DPI=400             # Reduced from 600
MIN_DPI=72

# Performance Settings - Optimized for 8GB VPS
MAX_WORKERS=2           # Reduced for memory efficiency
REQUEST_TIMEOUT=180     # 3 minutes (reduced from 5)

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Health Check Configuration
MIN_CONFIDENCE=0.0
